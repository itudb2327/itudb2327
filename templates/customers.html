{% extends "base.html" %} 
{% block page_content %}
<div class="container" style="padding-top: 8%;">
  <form action="/customers" method="get">
    <label for="sort">Sort by:</label>
    <select name="sort_by" id="sort">
      <option value="id">ID</option>
      <option value="company">Company</option>
      <option value="first_name">First Name</option>
      <option value="last_name">Last Name</option>
      <option value="job_title">Job Title</option>
      <option value="business_phone">Business Phone</option>
      <option value="address">Address</option>
      <option value="city">City</option>
    </select>
    <input type="submit" class="btn btn-success" value="Sort" />
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newCustomerModal">New Customer</button>
  </form>
  
  <div class="mt-4">
    <table class="table table-light table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Company</th>
          <th scope="col">First Name</th>
          <th scope="col">Last Name</th>
          <th scope="col">Job Title</th>
          <th scope="col">Business Phone</th>
          <th scope="col">Address</th>
          <th scope="col">City</th>
          <th scope="col">Update</th>
          <th scope="col">Delete</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for customer in customers_list %}
        <tr>
          <th scope="row">{{ customer.id }}</th>
          <td>{{ customer.company }}</td>
          <td>{{ customer.first_name }}</td>
          <td>{{ customer.last_name }}</td>
          <td>{{ customer.job_title }}</td>
          <td>{{ customer.business_phone }}</td>
          <td>{{ customer.address }}</td>
          <td>{{ customer.city }}</td>
          <td>
            <button id="updateButton" class="btn btn-primary">Update</button>
          </td>
          <td>
            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteConfirmationModal">Delete</button>
          </td>

  </div>
  <div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirm Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              </button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this customer?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <form action="/customers" method="post" id="deleteForm">
                  <input type="hidden" name="deleteCustomerId" value="{{ customer.id }}">
                <button type="submit" class="btn btn-danger">Delete</button>
              </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="newCustomerModal" tabindex="-1" role="dialog" aria-labelledby="newCustomerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="newCustomerModalLabel">New Customer</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            </button>
          </div>
          <div class="modal-body">
            <form action="/customers" method="post" name="customerNew">
              <div class="mb-3">
                <input type="hidden" class="form-control" name="newCustomerId">
              </div>
              <div class="mb-3">
                <label for="customerCompany" class="form-label">Company</label>
                <input type="text" class="form-control" name="customerCompany">
              </div>
              <div class="mb-3">
                <label for="customerFirstName" class="form-label">First Name</label>
                <input type="text" class="form-control" name="customerFirstName">
              </div>
              <div class="mb-3">
                <label for="customerLastName" class="form-label">Last Name</label>
                <input type="text" class="form-control" name="customerLastName">
              </div>
              <div class="mb-3">
                <label for="customerJobTitle" class="form-label">Job Title</label>
                <input type="text" class="form-control" name="customerJobTitle">
              </div>
              <div class="mb-3">
                <label for="customerBussinessPhone" class="form-label">Bussiness Phone</label>
                <input type="text" class="form-control" name="customerBussinessPhone">
              </div>
              <div class="mb-3">
                <label for="customerAddress" class="form-label">Address</label>
                <input type="text" class="form-control" name="customerAddress">
              </div>
              <div class="mb-3">
                <label for="customerCity" class="form-label">City</label>
                <input type="text" class="form-control" name="customerCity">
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Create</button>
            </form>
          </div>
      </div>
  </div>
</div>
{% endfor %}
</tr>
</tbody>
</table>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

{% endblock %}
